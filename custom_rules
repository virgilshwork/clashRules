#####################################################
# åœ¨VARnä½ç½®æ’å…¥æ–‡æœ¬
#####################################################
VAR1='LocalAreaNetwork.list'
cat >VAR1<<- 'EOF'
ruleset=â“‚ï¸ åŠ å¯†è´§å¸,https://raw.githubusercontent.com/virgilshwork/clashrule/main/cryptoAll.list
ruleset=â“‚ï¸ æŒ–çŸ¿ä¸“åŒº,https://raw.githubusercontent.com/virgilshwork/clashrule/main/cryptoMinerPool.list
ruleset=â“‚ï¸ ç‰¹æ®ŠæŒ‡å®š,https://raw.githubusercontent.com/virgilshwork/clashrule/main/01_special.list
ruleset=â“‚ï¸ DenyKids,https://raw.githubusercontent.com/virgilshwork/clashrule/main/01_denykids.list
ruleset=â“‚ï¸ VPN,https://raw.githubusercontent.com/virgilshwork/clashrule/main/01_softether.list
ruleset=â“‚ï¸ è§†é¢‘æŒ‡å®š,https://raw.githubusercontent.com/virgilshwork/clashrule/main/01_video.list
EOF

VAR2='è´Ÿè½½å‡è¡¡`load-balance`'
cat >VAR2<<- 'EOF'
custom_proxy_group=ğŸ° å¸¸è§„è‡ªåŠ¨`url-test`(Normal|normal|å¸¸è§„)`http://www.gstatic.com/generate_204`300,,50
custom_proxy_group=â“‚ï¸ åŠ å¯†è´§å¸`select`[]ğŸ”¯ æ•…éšœè½¬ç§»`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
custom_proxy_group=â“‚ï¸ æŒ–çŸ¿ä¸“åŒº`select`[]ğŸ”¯ æ•…éšœè½¬ç§»`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
custom_proxy_group=â“‚ï¸ ç‰¹æ®ŠæŒ‡å®š`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
custom_proxy_group=â“‚ï¸ DenyKids`select`[]PASS`[]DIRECT`[]REJECT
custom_proxy_group=â“‚ï¸ VPN`select`[]PASS`[]DIRECT`[]REJECT
custom_proxy_group=â“‚ï¸ è§†é¢‘æŒ‡å®š`select`[]ğŸ”¯ æ•…éšœè½¬ç§»`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹`[]ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹`[]ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹`[]ğŸš€ æ‰‹åŠ¨åˆ‡æ¢`[]DIRECT
EOF

#####################################################
# æ›¿æ¢æ–‡æœ¬ï¼Œ2è¡Œä¸€ç»„ã€‚
#####################################################
cat >replaceText<<- 'EOF'
select`[]REJECT`[]DIRECT
select`[]PASS`[]DIRECT`[]REJECT
æ¼ç½‘ä¹‹é±¼`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]DIRECT
æ¼ç½‘ä¹‹é±¼`select`[]DIRECT`[]PASS`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©
select`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`
select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹`
æ¸¸æˆå¹³å°`select`[]DIRECT`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©
æ¸¸æˆå¹³å°`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]DIRECT
èŠ‚ç‚¹é€‰æ‹©`select`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]
èŠ‚ç‚¹é€‰æ‹©`select`[]â™»ï¸ è‡ªåŠ¨é€‰æ‹©`[]ğŸ° å¸¸è§„è‡ªåŠ¨`[]
å¥ˆé£è§†é¢‘`select`[]ğŸ¥ å¥ˆé£èŠ‚ç‚¹`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©
å¥ˆé£è§†é¢‘`select`[]ğŸš€ èŠ‚ç‚¹é€‰æ‹©`[]ğŸ¥ å¥ˆé£èŠ‚ç‚¹
EOF

#####################################################
# æŠ“å–ACL4SSR_Online_Full_MultiMode
#####################################################
curl https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Full_MultiMode.ini > virgil.ini

#####################################################
# æ‰§è¡Œæ’å…¥æŒ‡ä»¤
#####################################################
sed -i "/$VAR1/r VAR1" virgil.ini
sed -i "/$VAR2/r VAR2" virgil.ini

#####################################################
# æ‰§è¡Œæ›¿æ¢æŒ‡ä»¤
#####################################################
checkPoint=0
fromText=""
cat replaceText|while read line
do
  if [ $checkPoint -eq "0" ]; then
        fromText=$line
        checkPoint=1
  else
        sed -i "s/${fromText//\[/\\[}/${line//\[/\\[}/g" virgil.ini
        checkPoint=0
  fi
done
